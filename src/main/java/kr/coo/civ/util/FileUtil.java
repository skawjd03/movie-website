package kr.coo.civ.util;

import java.io.*;

/**
 * 
 * @author	조원?��
 * @since	2019/01/03
 * @version	1.0
 * @see
 * 		코드 ?��?�� ?��?��
 * 			2019/27/03		?��?��?�� ?��?��		?��?��?�� : 조원?��
 *
 */

public class FileUtil {
	/*
		?��?�� ?��름이 중복?�� ?���? 마�?�? ???��?�� ?��?���? ??체되?�� ???��?�� ?��?��.
		?��?��?�� 중복?�� ?��름의 ?��?��?�� ?��?���? ?��름을 바꿔?�� ???��?��?�� ?��?��.
		중복?�� ?��름의 ?��?��?�� 존재?���? ?��?��?�� ?��름을 바꿔주는 ?��?���? 만들?��.
	 */
	
	public static String rename(String path, String oldName) {
		/*
		 	규칙]
		 		같�? ?��름의 ?��?��?�� 존재?���? ?��?�� ?��름뒤?�� [ _?��?�� ] �?  붙여?�� 처리?��?���? ?��?��.
		 		
		 		?��]
		 			soo.jpg ==> soo_1.jpg ==> soo_2.jpg
		 */
		int count = 0;
		String tmpName = oldName;
		File file = new File(path, oldName);
		while(file.exists()) {
			// 같�? ?��름의 ?��?��?�� 존재?��?��경우 ?��름을 바꿔줘야 ?��?��.
			// 붙일 번호�? 증�??��켜줘?�� ?��?��.
			count++;

			// .?�� 기�??�� ?��?�� 문자?���? ?��?�� ?��?��?���? 분리?��?��.
			int len = tmpName.lastIndexOf(".");
			String tmp1 = tmpName.substring(0, len);
			String tmp2 = tmpName.substring(len + 1);
			// ==> abcd_1_1.jpg
			
			// ?��?�� 분리?�� 문자?��?�� ?��?��?�� 번호�? 붙여?�� ?��?�� ?��치면 ?��?��.
			oldName = tmp1 + "_" + count + "." + tmp2;
			// 그런?�� ?�� ?��?��?�� 존재?��?���? ?��?��?��?�� ?��?��.
			// ?��?�� File 객체�? 만들?��?�� ?��?��?��?�� ?��?��.
			file = new File(path, oldName);
		}
		return oldName;
	}
}
